{{/* AINEXT V2 - 文章卡片元件 */}}
{{/*
  使用方式：{{ partial "v2/article-card.html" (dict "page" . "variant" "default") }}

  variant 選項：
  - default: 標準卡片（圖 + 標題 + 摘要）
  - hero: 大型卡片
  - small: 小型卡片
  - text-only: 純文字
  - horizontal: 橫向排列
*/}}

{{ $page := .page }}
{{ $variant := .variant | default "default" }}

{{ $classes := "article-card" }}
{{ if eq $variant "hero" }}
  {{ $classes = "article-card article-card--hero" }}
{{ else if eq $variant "small" }}
  {{ $classes = "article-card article-card--small" }}
{{ else if eq $variant "text-only" }}
  {{ $classes = "article-card article-card--text-only" }}
{{ else if eq $variant "horizontal" }}
  {{ $classes = "article-card article-card--horizontal" }}
{{ end }}

<a href="{{ $page.Permalink }}" class="{{ $classes }}">
  {{/* 圖片 */}}
  {{ if ne $variant "text-only" }}
    {{ $image := "" }}
    {{ with $page.Params.image }}
      {{ $image = . }}
    {{ else }}
      {{ with $page.Resources.GetMatch "*.{jpg,jpeg,png,gif,webp}" }}
        {{ $image = .RelPermalink }}
      {{ end }}
    {{ end }}
    {{ if $image }}
    <img src="{{ $image }}" alt="{{ $page.Title }}" class="article-card__image" loading="lazy">
    {{ end }}
  {{ end }}

  <div class="article-card__content">
    {{/* 分類 */}}
    {{ with $page.Params.categories }}
      {{ range first 1 . }}
      <span class="article-card__category">{{ . }}</span>
      {{ end }}
    {{ end }}

    {{/* 標題 */}}
    <h3 class="article-card__title">{{ $page.Title }}</h3>

    {{/* 摘要 */}}
    {{ if or (eq $variant "default") (eq $variant "hero") (eq $variant "horizontal") }}
    <p class="article-card__excerpt">
      {{ with $page.Description }}
        {{ . | truncate 100 }}
      {{ else }}
        {{ $page.Summary | plainify | truncate 100 }}
      {{ end }}
    </p>
    {{ end }}

    {{/* 日期 */}}
    <time class="article-card__date" datetime="{{ $page.Date.Format "2006-01-02" }}">
      {{ $page.Date.Format "2006 年 1 月 2 日" }}
    </time>
  </div>
</a>

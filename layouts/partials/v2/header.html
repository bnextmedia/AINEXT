{{/* AINEXT V2 - 頁首（Semafor 風格） */}}

<header class="site-header">
  <div class="site-header__inner">

    {{/* 左側：旋轉地球 + 當地時間 + 日期 */}}
    <div class="site-header__left">
      <div class="site-header__globe">
        <svg class="globe-icon" viewBox="0 0 24 24" width="20" height="20">
          <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="1.5"/>
          <ellipse cx="12" cy="12" rx="10" ry="4" fill="none" stroke="currentColor" stroke-width="1"/>
          <line x1="12" y1="2" x2="12" y2="22" stroke="currentColor" stroke-width="1"/>
          <line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="1"/>
        </svg>
      </div>
      <div class="site-header__datetime">
        <span class="site-header__time" id="current-time">--:-- --</span>
        <span class="site-header__date-text" id="current-date">----年--月--日 週-</span>
      </div>
    </div>

    {{/* 中間上方：Slogan */}}
    <div class="site-header__center-top">
      <span class="site-header__slogan">AI 新商業情報觀察站</span>
    </div>

    {{/* 中間：城市時鐘（左三） */}}
    <div class="site-header__clocks site-header__clocks--left">
      <div class="clock-item" data-timezone="Asia/Taipei">
        <span class="clock-item__city">台北</span>
        <div class="clock-item__face">
          <svg viewBox="0 0 100 100" class="clock-svg">
            {{/* 錶面 */}}
            <circle cx="50" cy="50" r="48" fill="none" stroke="currentColor" stroke-width="2"/>
            {{/* 時刻標記 */}}
            <line x1="50" y1="6" x2="50" y2="12" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="88" x2="50" y2="94" stroke="currentColor" stroke-width="2"/>
            <line x1="6" y1="50" x2="12" y2="50" stroke="currentColor" stroke-width="2"/>
            <line x1="88" y1="50" x2="94" y2="50" stroke="currentColor" stroke-width="2"/>
            {{/* 時針 */}}
            <line class="clock-hand clock-hand--hour" x1="50" y1="50" x2="50" y2="26" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
            {{/* 分針 */}}
            <line class="clock-hand clock-hand--minute" x1="50" y1="50" x2="50" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            {{/* 中心點 */}}
            <circle cx="50" cy="50" r="3" fill="currentColor"/>
          </svg>
        </div>
      </div>
      <div class="clock-item" data-timezone="Asia/Tokyo">
        <span class="clock-item__city">東京</span>
        <div class="clock-item__face">
          <svg viewBox="0 0 100 100" class="clock-svg">
            <circle cx="50" cy="50" r="48" fill="none" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="6" x2="50" y2="12" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="88" x2="50" y2="94" stroke="currentColor" stroke-width="2"/>
            <line x1="6" y1="50" x2="12" y2="50" stroke="currentColor" stroke-width="2"/>
            <line x1="88" y1="50" x2="94" y2="50" stroke="currentColor" stroke-width="2"/>
            <line class="clock-hand clock-hand--hour" x1="50" y1="50" x2="50" y2="26" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
            <line class="clock-hand clock-hand--minute" x1="50" y1="50" x2="50" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <circle cx="50" cy="50" r="3" fill="currentColor"/>
          </svg>
        </div>
      </div>
      <div class="clock-item" data-timezone="Europe/London">
        <span class="clock-item__city">倫敦</span>
        <div class="clock-item__face">
          <svg viewBox="0 0 100 100" class="clock-svg">
            <circle cx="50" cy="50" r="48" fill="none" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="6" x2="50" y2="12" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="88" x2="50" y2="94" stroke="currentColor" stroke-width="2"/>
            <line x1="6" y1="50" x2="12" y2="50" stroke="currentColor" stroke-width="2"/>
            <line x1="88" y1="50" x2="94" y2="50" stroke="currentColor" stroke-width="2"/>
            <line class="clock-hand clock-hand--hour" x1="50" y1="50" x2="50" y2="26" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
            <line class="clock-hand clock-hand--minute" x1="50" y1="50" x2="50" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <circle cx="50" cy="50" r="3" fill="currentColor"/>
          </svg>
        </div>
      </div>
    </div>

    {{/* 中間：Logo - 點擊回到首頁 */}}
    <div class="site-header__logo">
      <a href="{{ "/" | relURL }}">AINEXT</a>
    </div>

    {{/* 中間：城市時鐘（右三） */}}
    <div class="site-header__clocks site-header__clocks--right">
      <div class="clock-item" data-timezone="America/New_York">
        <span class="clock-item__city">紐約</span>
        <div class="clock-item__face">
          <svg viewBox="0 0 100 100" class="clock-svg">
            <circle cx="50" cy="50" r="48" fill="none" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="6" x2="50" y2="12" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="88" x2="50" y2="94" stroke="currentColor" stroke-width="2"/>
            <line x1="6" y1="50" x2="12" y2="50" stroke="currentColor" stroke-width="2"/>
            <line x1="88" y1="50" x2="94" y2="50" stroke="currentColor" stroke-width="2"/>
            <line class="clock-hand clock-hand--hour" x1="50" y1="50" x2="50" y2="26" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
            <line class="clock-hand clock-hand--minute" x1="50" y1="50" x2="50" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <circle cx="50" cy="50" r="3" fill="currentColor"/>
          </svg>
        </div>
      </div>
      <div class="clock-item" data-timezone="America/Phoenix">
        <span class="clock-item__city">鳳凰城</span>
        <div class="clock-item__face">
          <svg viewBox="0 0 100 100" class="clock-svg">
            <circle cx="50" cy="50" r="48" fill="none" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="6" x2="50" y2="12" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="88" x2="50" y2="94" stroke="currentColor" stroke-width="2"/>
            <line x1="6" y1="50" x2="12" y2="50" stroke="currentColor" stroke-width="2"/>
            <line x1="88" y1="50" x2="94" y2="50" stroke="currentColor" stroke-width="2"/>
            <line class="clock-hand clock-hand--hour" x1="50" y1="50" x2="50" y2="26" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
            <line class="clock-hand clock-hand--minute" x1="50" y1="50" x2="50" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <circle cx="50" cy="50" r="3" fill="currentColor"/>
          </svg>
        </div>
      </div>
      <div class="clock-item" data-timezone="America/Los_Angeles">
        <span class="clock-item__city">舊金山</span>
        <div class="clock-item__face">
          <svg viewBox="0 0 100 100" class="clock-svg">
            <circle cx="50" cy="50" r="48" fill="none" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="6" x2="50" y2="12" stroke="currentColor" stroke-width="2"/>
            <line x1="50" y1="88" x2="50" y2="94" stroke="currentColor" stroke-width="2"/>
            <line x1="6" y1="50" x2="12" y2="50" stroke="currentColor" stroke-width="2"/>
            <line x1="88" y1="50" x2="94" y2="50" stroke="currentColor" stroke-width="2"/>
            <line class="clock-hand clock-hand--hour" x1="50" y1="50" x2="50" y2="26" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
            <line class="clock-hand clock-hand--minute" x1="50" y1="50" x2="50" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <circle cx="50" cy="50" r="3" fill="currentColor"/>
          </svg>
        </div>
      </div>
    </div>

    {{/* 右側：漢堡選單按鈕（手機版用） */}}
    <div class="site-header__right">
      <button class="site-header__menu-btn" id="mobile-menu-btn" aria-label="選單" aria-expanded="false">
        <svg class="menu-icon menu-icon--open" viewBox="0 0 24 24" width="24" height="24">
          <line x1="3" y1="6" x2="21" y2="6" stroke="currentColor" stroke-width="2"/>
          <line x1="3" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2"/>
          <line x1="3" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="2"/>
        </svg>
        <svg class="menu-icon menu-icon--close" viewBox="0 0 24 24" width="24" height="24" style="display: none;">
          <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2"/>
          <line x1="6" y1="18" x2="18" y2="6" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>
    </div>

  </div>
</header>

{{/* 時鐘樣式 - 關鍵：transform-origin 設為中心點 */}}
<style>
.clock-hand {
  transform-origin: 50px 50px;
  transition: transform 0.3s ease-out;
}
</style>

{{/* 時鐘 JavaScript */}}
<script>
(function() {
  // 更新當地時間和日期
  function updateLocalTime() {
    var now = new Date();

    // 時間格式：4:10 PM
    var hours = now.getHours();
    var minutes = now.getMinutes().toString().padStart(2, '0');
    var ampm = hours >= 12 ? 'PM' : 'AM';
    hours = hours % 12;
    hours = hours ? hours : 12;
    document.getElementById('current-time').textContent = hours + ':' + minutes + ' ' + ampm;

    // 日期格式：週五 1月23日 2026
    var weekdays = ['週日', '週一', '週二', '週三', '週四', '週五', '週六'];
    var weekday = weekdays[now.getDay()];
    var month = now.getMonth() + 1;
    var date = now.getDate();
    var year = now.getFullYear();
    document.getElementById('current-date').textContent = weekday + ' ' + month + '月' + date + '日 ' + year;
  }

  // 更新世界時鐘
  function updateWorldClocks() {
    var clocks = document.querySelectorAll('.clock-item');
    clocks.forEach(function(clock) {
      var timezone = clock.dataset.timezone;
      var now = new Date();

      // 取得該時區的時間
      var options = { timeZone: timezone, hour: 'numeric', minute: 'numeric', hour12: false };
      var timeStr = now.toLocaleTimeString('en-US', options);
      var parts = timeStr.split(':');
      var hours = parseInt(parts[0], 10);
      var minutes = parseInt(parts[1], 10);

      // 計算指針角度
      // 時針：每小時 30 度，每分鐘 0.5 度
      var hourAngle = (hours % 12) * 30 + minutes * 0.5;
      // 分針：每分鐘 6 度
      var minuteAngle = minutes * 6;

      // 用 CSS transform 更新指針角度
      var hourHand = clock.querySelector('.clock-hand--hour');
      var minuteHand = clock.querySelector('.clock-hand--minute');

      if (hourHand) {
        hourHand.style.transform = 'rotate(' + hourAngle + 'deg)';
      }
      if (minuteHand) {
        minuteHand.style.transform = 'rotate(' + minuteAngle + 'deg)';
      }
    });
  }

  // 初始化
  updateLocalTime();
  updateWorldClocks();

  // 每秒更新
  setInterval(updateLocalTime, 1000);
  setInterval(updateWorldClocks, 1000);
})();
</script>

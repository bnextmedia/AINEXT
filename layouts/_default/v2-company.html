<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "zh-TW" }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ .Params.company_title | default .Title }} | å…¬å¸åº« | {{ .Site.Title }}</title>
  <meta name="description" content="{{ .Params.company_desc | default .Description }}">

  {{/* å­—é«”è¼‰å…¥ */}}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&family=Noto+Sans+TC:wght@400;500;700&family=Noto+Serif+TC:wght@400;500;600&display=swap" rel="stylesheet">

  {{/* V2 æ¨£å¼ */}}
  {{ $style := resources.Get "sass-v2/main.sass" | toCSS | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $style.Permalink }}">
</head>
<body class="site">

  {{ partial "v2/header.html" . }}
  {{ partial "v2/nav.html" . }}

  <main class="site-main">
    {{/* æ ¹æ“š slug æ‰¾åˆ°å°æ‡‰çš„å…¬å¸ */}}
    {{ $slug := .Params.company_slug }}
    {{ $company := index (where .Site.RegularPages "Section" "companies") 0 }}

    {{ range where .Site.RegularPages "Section" "companies" }}
      {{ if eq .File.ContentBaseName $slug }}
        {{ $company = . }}
      {{ end }}
    {{ end }}

    {{ with $company }}
    <article class="company-page">

      {{/* å…¬å¸é é¦– */}}
      <header class="company-page__header">
        <div class="company-page__header-main">
          {{/* Logo */}}
          <div class="company-page__logo">
            {{ with .Params.logo }}
            <img src="{{ . }}" alt="{{ $.Title }}">
            {{ else }}
            <div class="company-page__logo-placeholder">
              <span>{{ substr .Title 0 2 | upper }}</span>
            </div>
            {{ end }}
          </div>

          {{/* åŸºæœ¬è³‡è¨Š */}}
          <div class="company-page__info">
            <h1 class="company-page__name">{{ .Title }}</h1>
            {{ with .Params.name_zh }}<p class="company-page__name-zh">{{ . }}</p>{{ end }}
            <p class="company-page__tagline">{{ .Params.description_short }}</p>

            <div class="company-page__meta">
              {{ with .Params.headquarters }}
              <span class="company-page__meta-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                  <circle cx="12" cy="10" r="3"></circle>
                </svg>
                {{ . }}
              </span>
              {{ end }}
              {{ with .Params.founded }}
              <span class="company-page__meta-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                æˆç«‹æ–¼ {{ . }}
              </span>
              {{ end }}
              {{ with .Params.employee_count }}
              <span class="company-page__meta-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="9" cy="7" r="4"></circle>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                {{ . }} äºº
              </span>
              {{ end }}
            </div>
          </div>
        </div>

        {{/* é€£çµæŒ‰éˆ• */}}
        <div class="company-page__links">
          {{ with .Params.website }}
          <a href="{{ . }}" target="_blank" rel="noopener" class="company-page__btn company-page__btn--primary">å®˜æ–¹ç¶²ç«™</a>
          {{ end }}
          {{ with .Params.social }}
            {{ with .twitter }}<a href="{{ . }}" target="_blank" rel="noopener" class="company-page__btn company-page__btn--icon" title="Twitter">ğ•</a>{{ end }}
            {{ with .linkedin }}<a href="{{ . }}" target="_blank" rel="noopener" class="company-page__btn company-page__btn--icon" title="LinkedIn">in</a>{{ end }}
            {{ with .github }}<a href="{{ . }}" target="_blank" rel="noopener" class="company-page__btn company-page__btn--icon" title="GitHub">âŒ¨</a>{{ end }}
          {{ end }}
        </div>
      </header>

      {{/* ç‹€æ…‹æ¨™ç±¤ */}}
      <div class="company-page__badges">
        {{ with .Params.status }}
        <span class="company-page__badge company-page__badge--{{ . }}">
          {{ if eq . "private" }}ç§æœ‰å…¬å¸
          {{ else if eq . "public" }}ä¸Šå¸‚å…¬å¸
          {{ else if eq . "acquired" }}å·²è¢«æ”¶è³¼
          {{ else if eq . "defunct" }}å·²åœæ­¢ç‡Ÿé‹
          {{ else }}{{ . }}{{ end }}
        </span>
        {{ end }}
        {{ with .Params.category_primary }}<span class="company-page__badge company-page__badge--category">{{ . }}</span>{{ end }}
        {{ with .Params.category_secondary }}<span class="company-page__badge company-page__badge--subcategory">{{ . }}</span>{{ end }}
      </div>

      {{/* ä¸»å…§å®¹å€ */}}
      <div class="company-page__content">

        {{/* å·¦å´ä¸»å…§å®¹ */}}
        <div class="company-page__main">

          {{/* å…¬å¸ç°¡ä»‹ */}}
          <section class="company-page__section">
            <h2>é—œæ–¼ {{ .Title }}</h2>
            <div class="company-page__description">
              {{ with .Params.description_long }}{{ . | markdownify }}{{ else }}{{ .Content }}{{ end }}
            </div>
            {{ with .Params.taiwan_relevance }}
            <div class="company-page__taiwan">
              <h3>å°ç£è§€é»</h3>
              <p>{{ . | markdownify }}</p>
            </div>
            {{ end }}
          </section>

          {{/* ç”¢å“èˆ‡æœå‹™ */}}
          {{ with .Params.products }}
          <section class="company-page__section">
            <h2>ç”¢å“èˆ‡æœå‹™</h2>
            <div class="company-page__products">
              {{ range . }}
              <div class="company-page__product">
                <h3>{{ .name }}</h3>
                <p>{{ .description }}</p>
                {{ with .url }}<a href="{{ . }}" target="_blank" rel="noopener">äº†è§£æ›´å¤š â†’</a>{{ end }}
              </div>
              {{ end }}
            </div>
          </section>
          {{ end }}

          {{/* ç™¼å±•æ­·å² */}}
          {{ with .Params.milestones }}
          <section class="company-page__section">
            <h2>ç™¼å±•æ­·å²</h2>
            <div class="company-page__timeline">
              {{ range . }}
              <div class="company-page__timeline-item">
                <div class="company-page__timeline-date">{{ .date }}</div>
                <div class="company-page__timeline-event">{{ .event }}</div>
              </div>
              {{ end }}
            </div>
          </section>
          {{ end }}

          {{/* èè³‡æ­·ç¨‹ */}}
          {{ with .Params.funding_rounds }}
          <section class="company-page__section">
            <h2>èè³‡æ­·ç¨‹</h2>
            <div class="company-page__funding-summary">
              {{ with $.Params.total_funding }}
              <div class="company-page__funding-stat">
                <span class="company-page__funding-value">{{ . }}</span>
                <span class="company-page__funding-label">ç¸½èè³‡é¡</span>
              </div>
              {{ end }}
              {{ with $.Params.latest_valuation }}
              <div class="company-page__funding-stat">
                <span class="company-page__funding-value">{{ . }}</span>
                <span class="company-page__funding-label">æœ€æ–°ä¼°å€¼</span>
              </div>
              {{ end }}
              {{ with $.Params.latest_round }}
              <div class="company-page__funding-stat">
                <span class="company-page__funding-value">{{ . }}</span>
                <span class="company-page__funding-label">æœ€æ–°è¼ªæ¬¡</span>
              </div>
              {{ end }}
            </div>
            <table class="company-page__funding-table">
              <thead>
                <tr>
                  <th>è¼ªæ¬¡</th>
                  <th>æ—¥æœŸ</th>
                  <th>é‡‘é¡</th>
                  <th>ä¼°å€¼</th>
                  <th>é ˜æŠ•æ–¹</th>
                </tr>
              </thead>
              <tbody>
                {{ range . }}
                <tr>
                  <td>{{ .round }}</td>
                  <td>{{ .date }}</td>
                  <td>{{ .amount }}</td>
                  <td>{{ with .valuation }}{{ . }}{{ else }}-{{ end }}</td>
                  <td>{{ with .lead_investor }}{{ . }}{{ else }}-{{ end }}</td>
                </tr>
                {{ end }}
              </tbody>
            </table>
          </section>
          {{ end }}

          {{/* é—œéµäººç‰© */}}
          {{ if or .Params.founders .Params.key_people }}
          <section class="company-page__section">
            <h2>é—œéµäººç‰©</h2>
            <div class="company-page__people">
              {{ with .Params.founders }}
                {{ range . }}
                <div class="company-page__person">
                  {{ with .people_slug }}
                  <a href="{{ "/v2/people/" | relURL }}{{ . }}/">
                  {{ end }}
                    <h3>{{ .name }}</h3>
                    <p>{{ .role }}</p>
                    <span class="company-page__person-badge">å‰µè¾¦äºº</span>
                  {{ with .people_slug }}</a>{{ end }}
                </div>
                {{ end }}
              {{ end }}
              {{ with .Params.key_people }}
                {{ range . }}
                <div class="company-page__person">
                  {{ with .people_slug }}
                  <a href="{{ "/v2/people/" | relURL }}{{ . }}/">
                  {{ end }}
                    <h3>{{ .name }}</h3>
                    <p>{{ .role }}</p>
                  {{ with .people_slug }}</a>{{ end }}
                </div>
                {{ end }}
              {{ end }}
            </div>
          </section>
          {{ end }}

          {{/* ç›¸é—œå ±å° */}}
          {{ $companySlug := .File.ContentBaseName }}
          {{ $relatedPosts := where (where $.Site.RegularPages "Section" "posts") ".Params.related_companies" "intersect" (slice $companySlug) }}
          {{ if $relatedPosts }}
          <section class="company-page__section">
            <h2>ç›¸é—œå ±å°</h2>
            <div class="company-page__related">
              {{ range $relatedPosts.ByDate.Reverse }}
              <a href="{{ .Permalink }}" class="company-page__related-item">
                <time>{{ .Date.Format "2006-01-02" }}</time>
                <h3>{{ .Title }}</h3>
              </a>
              {{ end }}
            </div>
          </section>
          {{ end }}

        </div>

        {{/* å³å´è³‡è¨Šå¡ */}}
        <aside class="company-page__sidebar">

          <div class="company-page__info-card">
            <h3>åŸºæœ¬è³‡æ–™</h3>
            <dl class="company-page__info-list">
              {{ with .Params.name_en }}<dt>è‹±æ–‡åç¨±</dt><dd>{{ . }}</dd>{{ end }}
              {{ with .Params.founded }}<dt>æˆç«‹å¹´ä»½</dt><dd>{{ . }}</dd>{{ end }}
              {{ with .Params.country }}<dt>åœ‹å®¶</dt><dd>{{ . }}</dd>{{ end }}
              {{ with .Params.city }}<dt>åŸå¸‚</dt><dd>{{ . }}</dd>{{ end }}
              {{ with .Params.employee_count }}<dt>å“¡å·¥äººæ•¸</dt><dd>{{ . }}</dd>{{ end }}
              {{ with .Params.current_ceo }}<dt>ç¾ä»» CEO</dt><dd>{{ . }}</dd>{{ end }}
              {{ with .Params.stock_ticker }}<dt>è‚¡ç¥¨ä»£è™Ÿ</dt><dd>{{ . }}</dd>{{ end }}
            </dl>
          </div>

          {{ with .Params.business_model }}
          <div class="company-page__info-card">
            <h3>å•†æ¥­æ¨¡å¼</h3>
            <div class="company-page__tags">
              {{ range . }}<span class="company-page__tag">{{ . }}</span>{{ end }}
            </div>
          </div>
          {{ end }}

          {{ with .Params.target_industries }}
          <div class="company-page__info-card">
            <h3>ç›®æ¨™ç”¢æ¥­</h3>
            <div class="company-page__tags">
              {{ range . }}<span class="company-page__tag">{{ . }}</span>{{ end }}
            </div>
          </div>
          {{ end }}

          {{ with .Params.investors }}
          <div class="company-page__info-card">
            <h3>ä¸»è¦æŠ•è³‡äºº</h3>
            <ul class="company-page__investors">
              {{ range . }}
              <li>
                <span>{{ .name }}</span>
                {{ with .type }}<small>{{ . }}</small>{{ end }}
              </li>
              {{ end }}
            </ul>
          </div>
          {{ end }}

          {{ with .Params.tags }}
          <div class="company-page__info-card">
            <h3>ç›¸é—œæ¨™ç±¤</h3>
            <div class="company-page__tags">
              {{ range . }}<span class="company-page__tag">{{ . }}</span>{{ end }}
            </div>
          </div>
          {{ end }}

          <div class="company-page__info-card company-page__info-card--meta">
            <h3>è³‡æ–™è³‡è¨Š</h3>
            <dl class="company-page__info-list">
              {{ with .Params.last_updated }}<dt>æœ€å¾Œæ›´æ–°</dt><dd>{{ . }}</dd>{{ end }}
              {{ with .Params.data_sources }}<dt>è³‡æ–™ä¾†æº</dt><dd>{{ delimit . ", " }}</dd>{{ end }}
            </dl>
          </div>

        </aside>

      </div>

    </article>
    {{ else }}
    <div class="company-page">
      <p>æ‰¾ä¸åˆ°å…¬å¸è³‡æ–™ã€‚è«‹ç¢ºèª company_slug åƒæ•¸è¨­å®šæ­£ç¢ºã€‚</p>
    </div>
    {{ end }}
  </main>

  {{ partial "v2/footer.html" . }}

</body>
</html>

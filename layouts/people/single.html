{{ define "main" }}
<article class="person-page">

  {{/* äººç‰©é é¦– */}}
  <header class="person-page__header">
    <div class="person-page__header-main">
      {{/* ç…§ç‰‡ */}}
      <div class="person-page__photo">
        {{ with .Params.photo }}
        <img src="{{ . }}" alt="{{ $.Title }}">
        {{ with $.Params.photo_credit }}
        <p class="person-page__photo-credit">{{ . }}</p>
        {{ end }}
        {{ else }}
        <div class="person-page__photo-placeholder">
          <span>{{ substr .Title 0 1 | upper }}</span>
        </div>
        {{ end }}
      </div>

      {{/* åŸºæœ¬è³‡è¨Š */}}
      <div class="person-page__info">
        <h1 class="person-page__name">{{ .Title }}</h1>
        {{ with .Params.name_zh }}<p class="person-page__name-zh">{{ . }}</p>{{ end }}
        <p class="person-page__tagline">{{ .Params.description_short }}</p>

        <div class="person-page__current">
          {{ with .Params.current_position }}<span class="person-page__position">{{ . }}</span>{{ end }}
          {{ with .Params.current_organization }}
          <span class="person-page__org">
            @ {{ with $.Params.current_org_slug }}<a href="{{ "/companies/" | relURL }}{{ . }}/">{{ $.Params.current_organization }}</a>{{ else }}{{ . }}{{ end }}
          </span>
          {{ end }}
        </div>

        <div class="person-page__meta">
          {{ with .Params.nationality }}
          <span class="person-page__meta-item">{{ . }}</span>
          {{ end }}
          {{ with .Params.birth_year }}
          <span class="person-page__meta-item">{{ . }} å¹´ç”Ÿ</span>
          {{ end }}
        </div>
      </div>
    </div>

    {{/* é€£çµæŒ‰éˆ• */}}
    <div class="person-page__links">
      {{ with .Params.social }}
        {{ with .personal_website }}<a href="{{ . }}" target="_blank" rel="noopener" class="person-page__btn person-page__btn--primary">å€‹äººç¶²ç«™</a>{{ end }}
        {{ with .twitter }}<a href="{{ . }}" target="_blank" rel="noopener" class="person-page__btn person-page__btn--icon" title="Twitter">ğ•</a>{{ end }}
        {{ with .linkedin }}<a href="{{ . }}" target="_blank" rel="noopener" class="person-page__btn person-page__btn--icon" title="LinkedIn">in</a>{{ end }}
        {{ with .github }}<a href="{{ . }}" target="_blank" rel="noopener" class="person-page__btn person-page__btn--icon" title="GitHub">âŒ¨</a>{{ end }}
      {{ end }}
    </div>
  </header>

  {{/* èº«ä»½æ¨™ç±¤ */}}
  <div class="person-page__badges">
    {{ with .Params.person_type }}
      {{ range . }}
      <span class="person-page__badge person-page__badge--type">{{ . }}</span>
      {{ end }}
    {{ end }}
    {{ with .Params.expertise_areas }}
      {{ range . }}
      <span class="person-page__badge person-page__badge--expertise">{{ . }}</span>
      {{ end }}
    {{ end }}
  </div>

  {{/* ä¸»å…§å®¹å€ */}}
  <div class="person-page__content">

    {{/* å·¦å´ä¸»å…§å®¹ */}}
    <div class="person-page__main">

      {{/* äººç‰©ç°¡ä»‹ */}}
      <section class="person-page__section">
        <h2>é—œæ–¼ {{ .Title }}</h2>
        <div class="person-page__description">
          {{ with .Params.description_long }}{{ . | markdownify }}{{ else }}{{ .Content }}{{ end }}
        </div>
      </section>

      {{/* è·æ¶¯ç¶“æ­· */}}
      {{ with .Params.career_history }}
      <section class="person-page__section">
        <h2>è·æ¶¯ç¶“æ­·</h2>
        <div class="person-page__career">
          {{ range . }}
          {{ $item := . }}
          <div class="person-page__career-item">
            <div class="person-page__career-years">{{ .years }}</div>
            <div class="person-page__career-details">
              <h3>{{ .position }}</h3>
              <p>
                {{ with .org_slug }}<a href="{{ "/companies/" | relURL }}{{ . }}/">{{ $item.organization }}</a>{{ else }}{{ .organization }}{{ end }}
              </p>
            </div>
          </div>
          {{ end }}
        </div>
      </section>
      {{ end }}

      {{/* å­¸æ­· */}}
      {{ with .Params.education }}
      <section class="person-page__section">
        <h2>å­¸æ­·</h2>
        <div class="person-page__education">
          {{ range . }}
          <div class="person-page__education-item">
            <h3>{{ .institution }}</h3>
            <p>{{ .degree }}</p>
            {{ with .years }}<span class="person-page__education-years">{{ . }}</span>{{ end }}
          </div>
          {{ end }}
        </div>
      </section>
      {{ end }}

      {{/* å‰µæ¥­ç¶“æ­· */}}
      {{ with .Params.founded_companies }}
      <section class="person-page__section">
        <h2>å‰µæ¥­ç¶“æ­·</h2>
        <div class="person-page__founded">
          {{ range . }}
          <div class="person-page__founded-item">
            <h3>{{ .name }}</h3>
            <span class="person-page__founded-year">{{ .year }} å¹´å‰µç«‹</span>
            {{ with .outcome }}<span class="person-page__founded-outcome">{{ . }}</span>{{ end }}
          </div>
          {{ end }}
        </div>
      </section>
      {{ end }}

      {{/* æŠ•è³‡ç¶“æ­· */}}
      {{ with .Params.investments }}
      <section class="person-page__section">
        <h2>æŠ•è³‡ç¶“æ­·</h2>
        <div class="person-page__investments">
          {{ range . }}
          <div class="person-page__investment-item">
            <span class="person-page__investment-company">{{ .company }}</span>
            {{ with .role }}<span class="person-page__investment-role">{{ . }}</span>{{ end }}
          </div>
          {{ end }}
        </div>
      </section>
      {{ end }}

      {{/* é‡è¦è«–æ–‡ */}}
      {{ with .Params.publications }}
      <section class="person-page__section">
        <h2>é‡è¦è«–æ–‡</h2>
        <div class="person-page__publications">
          {{ range . }}
          <div class="person-page__publication-item">
            <h3>
              {{ with .url }}<a href="{{ . }}" target="_blank" rel="noopener">{{ end }}
              {{ .title }}
              {{ with .url }}</a>{{ end }}
            </h3>
            <div class="person-page__publication-meta">
              {{ with .venue }}<span>{{ . }}</span>{{ end }}
              {{ with .year }}<span>{{ . }}</span>{{ end }}
            </div>
          </div>
          {{ end }}
        </div>
      </section>
      {{ end }}

      {{/* é‡è¦è¨€è«– */}}
      {{ with .Params.notable_quotes }}
      <section class="person-page__section">
        <h2>é‡è¦è¨€è«–</h2>
        <div class="person-page__quotes">
          {{ range . }}
          <blockquote class="person-page__quote">
            <p>{{ .quote }}</p>
            <footer>
              {{ with .context }}<cite>{{ . }}</cite>{{ end }}
              {{ with .date }}<time>{{ . }}</time>{{ end }}
            </footer>
          </blockquote>
          {{ end }}
        </div>
      </section>
      {{ end }}

      {{/* æˆå°±èˆ‡çé … */}}
      {{ if or .Params.achievements .Params.awards }}
      <section class="person-page__section">
        <h2>æˆå°±èˆ‡çé …</h2>
        {{ with .Params.achievements }}
        <ul class="person-page__achievements">
          {{ range . }}
          <li>{{ . }}</li>
          {{ end }}
        </ul>
        {{ end }}
        {{ with .Params.awards }}
        <div class="person-page__awards">
          {{ range . }}
          <div class="person-page__award">
            <span class="person-page__award-name">{{ .name }}</span>
            <span class="person-page__award-meta">{{ .issuer }} ({{ .year }})</span>
          </div>
          {{ end }}
        </div>
        {{ end }}
      </section>
      {{ end }}

      {{/* è©•åƒ¹èˆ‡çˆ­è­° */}}
      {{ if or .Params.positive_views .Params.negative_views .Params.controversies }}
      <section class="person-page__section">
        <h2>è©•åƒ¹èˆ‡çˆ­è­°</h2>
        {{ with .Params.positive_views }}
        <div class="person-page__views person-page__views--positive">
          <h3>æ­£é¢è©•åƒ¹</h3>
          <ul>
            {{ range . }}<li>{{ . }}</li>{{ end }}
          </ul>
        </div>
        {{ end }}
        {{ with .Params.negative_views }}
        <div class="person-page__views person-page__views--negative">
          <h3>è² é¢è©•åƒ¹</h3>
          <ul>
            {{ range . }}<li>{{ . }}</li>{{ end }}
          </ul>
        </div>
        {{ end }}
        {{ with .Params.controversies }}
        <div class="person-page__controversies">
          <h3>çˆ­è­°äº‹ä»¶</h3>
          {{ range . }}
          <div class="person-page__controversy-item">
            <h4>{{ .title }} <time>({{ .date }})</time></h4>
            <p>{{ .description }}</p>
          </div>
          {{ end }}
        </div>
        {{ end }}
      </section>
      {{ end }}

      {{/* ç›¸é—œå ±å° */}}
      {{ $personSlug := .File.ContentBaseName }}
      {{ $relatedPosts := where (where .Site.RegularPages "Section" "posts") ".Params.related_people" "intersect" (slice $personSlug) }}
      {{ if $relatedPosts }}
      <section class="person-page__section">
        <h2>ç›¸é—œå ±å°</h2>
        <div class="person-page__related">
          {{ range $relatedPosts.ByDate.Reverse }}
          <a href="{{ .Permalink }}" class="person-page__related-item">
            <time>{{ .Date.Format "2006-01-02" }}</time>
            <h3>{{ .Title }}</h3>
          </a>
          {{ end }}
        </div>
      </section>
      {{ end }}

    </div>

    {{/* å³å´è³‡è¨Šå¡ */}}
    <aside class="person-page__sidebar">

      <div class="person-page__info-card">
        <h3>åŸºæœ¬è³‡æ–™</h3>
        <dl class="person-page__info-list">
          {{ with .Params.name_en }}<dt>è‹±æ–‡å</dt><dd>{{ . }}</dd>{{ end }}
          {{ with .Params.nationality }}<dt>åœ‹ç±</dt><dd>{{ . }}</dd>{{ end }}
          {{ with .Params.birth_year }}<dt>å‡ºç”Ÿå¹´</dt><dd>{{ . }}</dd>{{ end }}
          {{ with .Params.current_position }}<dt>ç¾è·</dt><dd>{{ . }}</dd>{{ end }}
          {{ with .Params.current_organization }}<dt>ç¾ä»»è·æ©Ÿæ§‹</dt><dd>{{ . }}</dd>{{ end }}
        </dl>
      </div>

      {{/* é—œè¯å…¬å¸ */}}
      {{ with .Params.related_companies }}
      <div class="person-page__info-card">
        <h3>é—œè¯å…¬å¸</h3>
        <ul class="person-page__related-companies">
          {{ range . }}
          <li>
            <a href="{{ "/companies/" | relURL }}{{ .slug }}/">{{ .slug }}</a>
            <span>{{ .relation }}</span>
          </li>
          {{ end }}
        </ul>
      </div>
      {{ end }}

      {{ with .Params.tags }}
      <div class="person-page__info-card">
        <h3>ç›¸é—œæ¨™ç±¤</h3>
        <div class="person-page__tags">
          {{ range . }}<span class="person-page__tag">{{ . }}</span>{{ end }}
        </div>
      </div>
      {{ end }}

      {{/* å¤–éƒ¨é€£çµ */}}
      {{ with .Params.social }}
      {{ if or .wikipedia .google_scholar }}
      <div class="person-page__info-card">
        <h3>å¤–éƒ¨é€£çµ</h3>
        <ul class="person-page__external-links">
          {{ with .wikipedia }}<li><a href="{{ . }}" target="_blank" rel="noopener">Wikipedia</a></li>{{ end }}
          {{ with .google_scholar }}<li><a href="{{ . }}" target="_blank" rel="noopener">Google Scholar</a></li>{{ end }}
        </ul>
      </div>
      {{ end }}
      {{ end }}

      <div class="person-page__info-card person-page__info-card--meta">
        <h3>è³‡æ–™è³‡è¨Š</h3>
        <dl class="person-page__info-list">
          {{ with .Params.last_updated }}<dt>æœ€å¾Œæ›´æ–°</dt><dd>{{ . }}</dd>{{ end }}
          {{ with .Params.data_sources }}<dt>è³‡æ–™ä¾†æº</dt><dd>{{ delimit . ", " }}</dd>{{ end }}
        </dl>
      </div>

    </aside>

  </div>

</article>
{{ end }}

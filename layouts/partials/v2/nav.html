{{/* AINEXT V2 - 主導航（11 個選項 + RWD 漢堡選單） */}}
{{/*
  導航選項：
  1-8. 八大分類（錨點連結到首頁區塊）
  9.   AI 活動   → /activities/
  10.  AI 公司   → /companies/
  11.  AI 人物   → /people/
*/}}

{{ $baseUrl := "/" | relURL }}

<nav class="site-nav" id="site-nav">
  <div class="site-nav__inner">
    <ul class="site-nav__list" id="nav-menu">
      {{/* 八大板塊錨點連結 */}}
      <li class="site-nav__item">
        <a href="{{ $baseUrl }}#section-ai-tech" class="site-nav__link site-nav__link--anchor">AI 技術前沿</a>
      </li>
      <li class="site-nav__item">
        <a href="{{ $baseUrl }}#section-ai-industry" class="site-nav__link site-nav__link--anchor">AI 產業動態</a>
      </li>
      <li class="site-nav__item">
        <a href="{{ $baseUrl }}#section-ai-dev" class="site-nav__link site-nav__link--anchor">AI 開發實戰</a>
      </li>
      <li class="site-nav__item">
        <a href="{{ $baseUrl }}#section-ai-safety" class="site-nav__link site-nav__link--anchor">AI 安全與治理</a>
      </li>
      <li class="site-nav__item">
        <a href="{{ $baseUrl }}#section-tech-giants" class="site-nav__link site-nav__link--anchor">科技巨頭觀察</a>
      </li>
      <li class="site-nav__item">
        <a href="{{ $baseUrl }}#section-geopolitics" class="site-nav__link site-nav__link--anchor">地緣政治與經濟</a>
      </li>
      <li class="site-nav__item">
        <a href="{{ $baseUrl }}#section-leadership" class="site-nav__link site-nav__link--anchor">領袖思維</a>
      </li>
      <li class="site-nav__item">
        <a href="{{ $baseUrl }}#section-career" class="site-nav__link site-nav__link--anchor">職涯與學習</a>
      </li>

      {{/* 分隔線 */}}
      <li class="site-nav__divider" aria-hidden="true"></li>

      {{/* AI 活動 */}}
      <li class="site-nav__item">
        <a href="{{ "/activities/" | relURL }}" class="site-nav__link">AI 活動</a>
      </li>

      {{/* AI 公司 */}}
      <li class="site-nav__item">
        <a href="{{ "/companies/" | relURL }}" class="site-nav__link">AI 公司</a>
      </li>

      {{/* AI 人物 */}}
      <li class="site-nav__item">
        <a href="{{ "/people/" | relURL }}" class="site-nav__link">AI 人物</a>
      </li>
    </ul>
  </div>
</nav>

{{/* 手機版選單樣式 */}}
<style>
/* 桌面版：水平排列 */
.site-nav {
  border-top: 1px solid #333;
  border-bottom: 1px solid #333;
  background: #f5f0e1;
}

.site-nav__inner {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 1rem;
}

.site-nav__list {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: 0;
  list-style: none;
  margin: 0;
  padding: 0;
}

.site-nav__item {
  margin: 0;
}

.site-nav__link {
  display: block;
  padding: 0.75rem 1rem;
  color: #333;
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 500;
  transition: background-color 0.2s, color 0.2s;
  white-space: nowrap;
}

.site-nav__link:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.site-nav__link--disabled {
  color: #999;
  cursor: not-allowed;
  pointer-events: none;
}

.site-nav__divider {
  width: 1px;
  height: 1.5rem;
  background: #ccc;
  margin: 0 0.5rem;
}

/* 手機版：漢堡選單 */
@media (max-width: 1024px) {
  .site-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1000;
    background: rgba(245, 240, 225, 0.98);
    display: none;
    overflow-y: auto;
    padding-top: 4rem;
  }

  .site-nav.is-open {
    display: block;
  }

  .site-nav__inner {
    padding: 1rem;
  }

  .site-nav__list {
    flex-direction: column;
    align-items: stretch;
    gap: 0;
  }

  .site-nav__link {
    padding: 1rem 1.5rem;
    font-size: 1.1rem;
    border-bottom: 1px solid #ddd;
  }

  .site-nav__divider {
    width: 100%;
    height: 1px;
    margin: 0.5rem 0;
  }
}

/* 漢堡按鈕（桌面版隱藏） */
.site-header__menu-btn {
  display: none;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  color: #333;
}

@media (max-width: 1024px) {
  .site-header__menu-btn {
    display: block;
  }
}
</style>

{{/* 漢堡選單 JavaScript */}}
<script>
(function() {
  var menuBtn = document.getElementById('mobile-menu-btn');
  var nav = document.getElementById('site-nav');
  var openIcon = menuBtn ? menuBtn.querySelector('.menu-icon--open') : null;
  var closeIcon = menuBtn ? menuBtn.querySelector('.menu-icon--close') : null;

  if (menuBtn && nav) {
    menuBtn.addEventListener('click', function() {
      var isOpen = nav.classList.toggle('is-open');
      menuBtn.setAttribute('aria-expanded', isOpen);

      // 切換圖示
      if (openIcon && closeIcon) {
        openIcon.style.display = isOpen ? 'none' : 'block';
        closeIcon.style.display = isOpen ? 'block' : 'none';
      }

      // 鎖定背景滾動
      document.body.style.overflow = isOpen ? 'hidden' : '';
    });

    // 點擊選單項目後關閉選單
    nav.querySelectorAll('.site-nav__link').forEach(function(link) {
      link.addEventListener('click', function() {
        if (window.innerWidth <= 1024) {
          nav.classList.remove('is-open');
          menuBtn.setAttribute('aria-expanded', 'false');
          if (openIcon && closeIcon) {
            openIcon.style.display = 'block';
            closeIcon.style.display = 'none';
          }
          document.body.style.overflow = '';
        }
      });
    });
  }

  // 平滑滾動到錨點
  document.querySelectorAll('.site-nav__link--anchor').forEach(function(link) {
    link.addEventListener('click', function(e) {
      var href = this.getAttribute('href');
      var hashIndex = href.indexOf('#');

      if (hashIndex !== -1) {
        var targetId = href.substring(hashIndex + 1);
        var targetElement = document.getElementById(targetId);

        // 如果目標元素在當前頁面，使用平滑滾動
        if (targetElement) {
          e.preventDefault();
          targetElement.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });

          // 更新 URL hash
          history.pushState(null, null, '#' + targetId);
        }
      }
    });
  });
})();
</script>

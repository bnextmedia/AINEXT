{{/* V2 Company Card - 公司卡片組件 */}}
{{/* 使用方式: {{ partial "v2/company-card.html" (dict "company" . "variant" "default") }} */}}

{{ $company := .company }}
{{ $variant := .variant | default "default" }}

<article class="company-card {{ if eq $variant "small" }}company-card--small{{ end }}">
  <a href="{{ $company.Permalink }}" class="company-card__link">

    {{/* Logo */}}
    <div class="company-card__logo">
      {{ with $company.Params.logo }}
      <img src="{{ . }}" alt="{{ $company.Title }}">
      {{ else }}
      <div class="company-card__logo-placeholder">
        <span>{{ substr $company.Title 0 2 | upper }}</span>
      </div>
      {{ end }}
    </div>

    <div class="company-card__content">
      {{/* 狀態標籤 */}}
      {{ with $company.Params.status }}
      <span class="company-card__status company-card__status--{{ . }}">
        {{ if eq . "private" }}私有
        {{ else if eq . "public" }}上市
        {{ else if eq . "acquired" }}已收購
        {{ else if eq . "defunct" }}已停止
        {{ else }}{{ . }}{{ end }}
      </span>
      {{ end }}

      {{/* 公司名稱 */}}
      <h3 class="company-card__name">{{ $company.Title }}</h3>

      {{/* 簡介 */}}
      {{ with $company.Params.description_short }}
      <p class="company-card__desc">{{ . | truncate 60 }}</p>
      {{ end }}

      {{/* 分類和地點 */}}
      <div class="company-card__meta">
        {{ with $company.Params.category_primary }}
        <span class="company-card__category">{{ . }}</span>
        {{ end }}
        {{ with $company.Params.country }}
        <span class="company-card__location">{{ . }}</span>
        {{ end }}
      </div>

      {{/* 估值 */}}
      {{ with $company.Params.latest_valuation }}
      <div class="company-card__valuation">
        <span class="company-card__valuation-label">估值</span>
        <span class="company-card__valuation-value">{{ . }}</span>
      </div>
      {{ end }}

    </div>
  </a>
</article>

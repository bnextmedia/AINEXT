{{/* AINEXT V2 - æ´»å‹•å¡ç‰‡å…ƒä»¶ */}}
{{/*
  ä½¿ç”¨æ–¹å¼ï¼š{{ partial "v2/activity-card.html" (dict "activity" . "featured" true "past" false "variant" "default") }}

  åƒæ•¸ï¼š
  - activity: æ´»å‹•é é¢ç‰©ä»¶
  - featured: æ˜¯å¦ç‚ºç½®é ‚æ´»å‹•ï¼ˆé¡¯ç¤ºç½®é ‚æ¨™ç±¤ï¼‰
  - past: æ˜¯å¦ç‚ºéå»æ´»å‹•ï¼ˆé¡¯ç¤ºå·²çµæŸæ¨™ç±¤ï¼‰
  - variant: å¡ç‰‡æ¨£å¼ (default / small)
*/}}

{{ $activity := .activity }}
{{ $featured := .featured | default false }}
{{ $past := .past | default false }}
{{ $variant := .variant | default "default" }}

{{/* åˆ¤æ–·æ´»å‹•æ˜¯å¦å·²çµæŸ */}}
{{ $today := now.Format "2006-01-02" }}
{{ $isPast := lt $activity.Params.date_end $today }}

{{ $classes := "activity-card" }}
{{ if eq $variant "small" }}
  {{ $classes = "activity-card activity-card--small" }}
{{ end }}
{{ if $isPast }}
  {{ $classes = printf "%s activity-card--past" $classes }}
{{ end }}

<a href="{{ $activity.Permalink }}" class="{{ $classes }}">

  {{/* åœ–ç‰‡å€å¡Š */}}
  <div class="activity-card__image-wrapper">
    {{ with $activity.Params.image }}
    <img src="{{ . }}" alt="{{ $activity.Title }}" class="activity-card__image" loading="lazy">
    {{ else }}
    <div class="activity-card__image activity-card__image--placeholder">
      {{/* ä¾æ“šæ´»å‹•é¡å‹é¡¯ç¤ºåœ–ç¤º */}}
      {{ $type := $activity.Params.activity_type | default "conference" }}
      <span class="activity-card__placeholder-icon">
        {{ if eq $type "conference" }}ğŸ¤
        {{ else if eq $type "expo" }}ğŸ›ï¸
        {{ else if eq $type "workshop" }}ğŸ› ï¸
        {{ else if eq $type "meetup" }}ğŸ‘¥
        {{ else if eq $type "hackathon" }}ğŸ’»
        {{ else if eq $type "webinar" }}ğŸŒ
        {{ else if eq $type "course" }}ğŸ“š
        {{ else if eq $type "competition" }}ğŸ†
        {{ else }}ğŸ“…
        {{ end }}
      </span>
    </div>
    {{ end }}

    {{/* æ¨™ç±¤ */}}
    {{ if $featured }}
    <span class="activity-card__badge activity-card__badge--featured">ç½®é ‚</span>
    {{ else if $isPast }}
    <span class="activity-card__badge activity-card__badge--past">å·²çµæŸ</span>
    {{ end }}

    {{/* æ´»å‹•é¡å‹æ¨™ç±¤ */}}
    {{ with $activity.Params.activity_type }}
    <span class="activity-card__type-badge activity-card__type-badge--{{ . }}">
      {{ if eq . "conference" }}ç ”è¨æœƒ
      {{ else if eq . "expo" }}å±•è¦½
      {{ else if eq . "workshop" }}å·¥ä½œåŠ
      {{ else if eq . "meetup" }}ç¤¾ç¾¤èšæœƒ
      {{ else if eq . "hackathon" }}é»‘å®¢æ¾
      {{ else if eq . "webinar" }}ç·šä¸Šç ”è¨æœƒ
      {{ else if eq . "course" }}èª²ç¨‹
      {{ else if eq . "competition" }}ç«¶è³½
      {{ else }}{{ . }}
      {{ end }}
    </span>
    {{ end }}
  </div>

  {{/* å…§å®¹å€å¡Š */}}
  <div class="activity-card__content">
    {{/* æ¨™é¡Œ */}}
    <h3 class="activity-card__title">{{ $activity.Title }}</h3>

    {{/* åœ°é»èˆ‡æ™‚é–“ */}}
    <div class="activity-card__meta">
      <span class="activity-card__location">
        ğŸ“ {{ $activity.Params.city }}{{ with $activity.Params.country }}, {{ . }}{{ end }}
      </span>
      <span class="activity-card__date">
        ğŸ“… {{ if eq $activity.Params.date_start $activity.Params.date_end }}
          {{ $activity.Params.date_start }}
        {{ else }}
          {{ $activity.Params.date_start }} ~ {{ $activity.Params.date_end }}
        {{ end }}
      </span>
    </div>

    {{/* ç°¡ä»‹ï¼ˆåªåœ¨ default variant é¡¯ç¤ºï¼‰*/}}
    {{ if ne $variant "small" }}
    {{ with $activity.Params.description_short }}
    <p class="activity-card__excerpt">{{ . | truncate 60 }}</p>
    {{ end }}
    {{ end }}
  </div>

</a>
